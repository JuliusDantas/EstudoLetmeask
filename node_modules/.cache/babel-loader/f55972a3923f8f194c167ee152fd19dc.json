{"ast":null,"code":"import _regeneratorRuntime from\"C:/Nlw/letmeask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Nlw/letmeask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Nlw/letmeask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';import{useHistory}from'react-router-dom';import ilustrationImg from\"../assets/images/illustration.svg\";import logoImg from\"../assets/images/logo.svg\";import googleIconImg from\"../assets/images/google-icon.svg\";import{Button}from'../components/Button';import'../styles/auth.scss';import{useAuth}from'../hooks/useAuth';import{database}from'../services/firebase';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function Home(){var history=useHistory();var _useAuth=useAuth(),user=_useAuth.user,signInWhithGoogle=_useAuth.signInWhithGoogle;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),roomCode=_useState2[0],setroomCode=_useState2[1];function handleCreateRoom(){return _handleCreateRoom.apply(this,arguments);}function _handleCreateRoom(){_handleCreateRoom=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(user){_context.next=3;break;}_context.next=3;return signInWhithGoogle();case 3:history.push('/rooms/new');case 4:case\"end\":return _context.stop();}}},_callee);}));return _handleCreateRoom.apply(this,arguments);}function handleJoinRoom(_x){return _handleJoinRoom.apply(this,arguments);}function _handleJoinRoom(){_handleJoinRoom=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var roomRef;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();if(!(roomCode.trim()==='')){_context2.next=3;break;}return _context2.abrupt(\"return\");case 3:_context2.next=5;return database.ref(\"rooms/\".concat(roomCode)).get();case 5:roomRef=_context2.sent;if(roomRef.exists()){_context2.next=9;break;}alert('Room does not exists.');return _context2.abrupt(\"return\");case 9:if(!roomRef.val().endedAt){_context2.next=12;break;}alert('Room already closed.');return _context2.abrupt(\"return\");case 12:history.push(\"/rooms/\".concat(roomCode));case 13:case\"end\":return _context2.stop();}}},_callee2);}));return _handleJoinRoom.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{id:\"page-auth\",children:[/*#__PURE__*/_jsxs(\"aside\",{children:[/*#__PURE__*/_jsx(\"img\",{src:ilustrationImg,alt:\"Ilustra\\xE7\\xE3o simbolizando perguntas e respostas\"}),/*#__PURE__*/_jsx(\"strong\",{children:\"Crie salas de Q&A ao vivo\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Tire suas d\\xFAvidas da sua audi\\xEAncia em tempo real\"})]}),/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"main-content\",children:[/*#__PURE__*/_jsx(\"img\",{src:logoImg,alt:\"Letmeask\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleCreateRoom,className:\"create-room\",children:[/*#__PURE__*/_jsx(\"img\",{src:googleIconImg,alt:\"Google\"}),\"Crie sua sala com o Google\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"separator\",children:\"ou entre em uma sala\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleJoinRoom,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"digite o c\\xF3digo da sala\",onChange:function onChange(event){return setroomCode(event.target.value);},value:roomCode}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Entrar na sala\"})]})]})})]});}","map":{"version":3,"sources":["C:/Nlw/letmeask/src/pages/Home.tsx"],"names":["useState","useHistory","Button","useAuth","database","Home","history","user","signInWhithGoogle","roomCode","setroomCode","handleCreateRoom","push","handleJoinRoom","event","preventDefault","trim","ref","get","roomRef","exists","alert","val","endedAt","ilustrationImg","logoImg","googleIconImg","target","value"],"mappings":"+YAAA,OAAoBA,QAApB,KAAoC,OAApC,CACA,OAAQC,UAAR,KAAyB,kBAAzB,C,yKAMA,OAASC,MAAT,KAAuB,sBAAvB,CAEA,MAAO,qBAAP,CACA,OAASC,OAAT,KAAwB,kBAAxB,CACA,OAASC,QAAT,KAAyB,sBAAzB,C,wFAGA,MAAO,SAASC,CAAAA,IAAT,EAAe,CAClB,GAAMC,CAAAA,OAAO,CAAGL,UAAU,EAA1B,CADkB,aAEkBE,OAAO,EAFzB,CAEVI,IAFU,UAEVA,IAFU,CAEJC,iBAFI,UAEJA,iBAFI,eAGcR,QAAQ,CAAC,EAAD,CAHtB,wCAGXS,QAHW,eAGDC,WAHC,uBAKHC,CAAAA,gBALG,0JAKlB,sIACQJ,IADR,+CAEcC,CAAAA,iBAAiB,EAF/B,QAIIF,OAAO,CAACM,IAAR,CAAa,YAAb,EAJJ,sDALkB,2DAaHC,CAAAA,cAbG,sJAalB,kBAA8BC,KAA9B,kIACIA,KAAK,CAACC,cAAN,GADJ,KAGON,QAAQ,CAACO,IAAT,KAAoB,EAH3B,2FAO0BZ,CAAAA,QAAQ,CAACa,GAAT,iBAAsBR,QAAtB,GAAkCS,GAAlC,EAP1B,QAOUC,OAPV,mBASQA,OAAO,CAACC,MAAR,EATR,0BAUQC,KAAK,CAAC,uBAAD,CAAL,CAVR,6CAcOF,OAAO,CAACG,GAAR,GAAcC,OAdrB,2BAeQF,KAAK,CAAC,sBAAD,CAAL,CAfR,0CAmBIf,OAAO,CAACM,IAAR,kBAAuBH,QAAvB,GAnBJ,yDAbkB,iDAmClB,mBACI,aAAK,EAAE,CAAC,WAAR,wBACI,sCACI,YAAK,GAAG,CAAEe,cAAV,CAA0B,GAAG,CAAC,qDAA9B,EADJ,cAEI,qDAFJ,cAGI,6EAHJ,GADJ,cAMI,mCACI,aAAK,SAAS,CAAC,cAAf,wBACI,YAAK,GAAG,CAAEC,OAAV,CAAmB,GAAG,CAAC,UAAvB,EADJ,cAEI,gBAAQ,OAAO,CAAEd,gBAAjB,CAAmC,SAAS,CAAC,aAA7C,wBACI,YAAK,GAAG,CAAEe,aAAV,CAAyB,GAAG,CAAC,QAA7B,EADJ,gCAFJ,cAMI,YAAK,SAAS,CAAC,WAAf,kCANJ,cAOI,cAAM,QAAQ,CAAEb,cAAhB,wBACI,cACI,IAAI,CAAC,MADT,CAEI,WAAW,CAAC,4BAFhB,CAGI,QAAQ,CAAE,kBAAAC,KAAK,QAAIJ,CAAAA,WAAW,CAACI,KAAK,CAACa,MAAN,CAAaC,KAAd,CAAf,EAHnB,CAII,KAAK,CAAEnB,QAJX,EADJ,cAOI,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,4BAPJ,GAPJ,GADJ,EANJ,GADJ,CA8BH","sourcesContent":["import { FormEvent, useState } from 'react';\r\nimport {useHistory} from 'react-router-dom';\r\n\r\nimport ilustrationImg from '../assets/images/illustration.svg';\r\nimport logoImg from '../assets/images/logo.svg';\r\nimport googleIconImg from '../assets/images/google-icon.svg';\r\n\r\nimport { Button } from '../components/Button';\r\n\r\nimport '../styles/auth.scss';\r\nimport { useAuth } from '../hooks/useAuth';\r\nimport { database } from '../services/firebase';\r\n\r\n\r\nexport function Home(){\r\n    const history = useHistory();\r\n    const { user, signInWhithGoogle } = useAuth();\r\n    const [roomCode, setroomCode] = useState('');\r\n\r\n    async function handleCreateRoom() {\r\n        if(!user){\r\n            await signInWhithGoogle()\r\n        }\r\n        history.push('/rooms/new');\r\n                \r\n    }\r\n\r\n    async function handleJoinRoom(event: FormEvent){\r\n        event.preventDefault();\r\n\r\n        if(roomCode.trim() === ''){\r\n            return;\r\n        }\r\n\r\n        const roomRef = await database.ref(`rooms/${roomCode}`).get();\r\n\r\n        if(!roomRef.exists()) {\r\n            alert('Room does not exists.')\r\n            return;\r\n        }\r\n\r\n        if(roomRef.val().endedAt) {\r\n            alert('Room already closed.');\r\n            return;\r\n        }\r\n\r\n        history.push(`/rooms/${roomCode}`)\r\n    }\r\n\r\n    return(\r\n        <div id=\"page-auth\">\r\n            <aside>\r\n                <img src={ilustrationImg} alt=\"Ilustração simbolizando perguntas e respostas\" />\r\n                <strong>Crie salas de Q&amp;A ao vivo</strong>\r\n                <p>Tire suas dúvidas da sua audiência em tempo real</p>\r\n            </aside>\r\n            <main>\r\n                <div className=\"main-content\">\r\n                    <img src={logoImg} alt=\"Letmeask\" />\r\n                    <button onClick={handleCreateRoom} className=\"create-room\">\r\n                        <img src={googleIconImg} alt=\"Google\" />\r\n                        Crie sua sala com o Google\r\n                    </button>\r\n                    <div className=\"separator\">ou entre em uma sala</div>\r\n                    <form onSubmit={handleJoinRoom}>\r\n                        <input \r\n                            type=\"text\" \r\n                            placeholder=\"digite o código da sala\"\r\n                            onChange={event => setroomCode(event.target.value)}\r\n                            value={roomCode}\r\n                        />\r\n                        <Button type=\"submit\">\r\n                            Entrar na sala\r\n                        </Button>\r\n                    </form>\r\n                </div>\r\n            </main>\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}
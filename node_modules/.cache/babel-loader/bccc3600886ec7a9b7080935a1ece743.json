{"ast":null,"code":"import _regeneratorRuntime from\"C:/Nlw/letmeask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Nlw/letmeask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Nlw/letmeask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Link,useHistory}from'react-router-dom';import{useState}from'react';import ilustrationImg from\"../assets/images/illustration.svg\";import logoImg from\"../assets/images/logo.svg\";import{Button}from'../components/Button';import'../styles/auth.scss';import{database}from'../services/firebase';import{useAuth}from'../hooks/useAuth';// import { useAuth } from '../hooks/userAuth';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function NewRoom(){var _useAuth=useAuth(),user=_useAuth.user;var history=useHistory();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),newRoom=_useState2[0],setNewRoom=_useState2[1];function handleCreateRoom(_x){return _handleCreateRoom.apply(this,arguments);}function _handleCreateRoom(){_handleCreateRoom=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var roomRef,firebaseRoom;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();if(!(newRoom.trim()==='')){_context.next=3;break;}return _context.abrupt(\"return\");case 3:roomRef=database.ref('rooms');_context.next=6;return roomRef.push({title:newRoom,authorId:user===null||user===void 0?void 0:user.id,author:user===null||user===void 0?void 0:user.name});case 6:firebaseRoom=_context.sent;history.push(\"/rooms/\".concat(firebaseRoom.key));case 8:case\"end\":return _context.stop();}}},_callee);}));return _handleCreateRoom.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{id:\"page-auth\",children:[/*#__PURE__*/_jsxs(\"aside\",{children:[/*#__PURE__*/_jsx(\"img\",{src:ilustrationImg,alt:\"Ilustra\\xE7\\xE3o simbolizando perguntas e respostas\"}),/*#__PURE__*/_jsx(\"strong\",{children:\"Crie salas de Q&A ao vivo\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Tire suas d\\xFAvidas da sua audi\\xEAncia em tempo real\"})]}),/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"main-content\",children:[/*#__PURE__*/_jsx(\"img\",{src:logoImg,alt:\"Letmeask\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Criar uma nova sala\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCreateRoom,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"nome da sala\",onChange:function onChange(event){return setNewRoom(event.target.value);},value:newRoom}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Criar sala\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Quer enrar em uma sala existente? \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"clique aqui\"})]})]})})]});}","map":{"version":3,"sources":["C:/Nlw/letmeask/src/pages/NewRoom.tsx"],"names":["Link","useHistory","useState","Button","database","useAuth","NewRoom","user","history","newRoom","setNewRoom","handleCreateRoom","event","preventDefault","trim","roomRef","ref","push","title","authorId","id","author","name","firebaseRoom","key","ilustrationImg","logoImg","target","value"],"mappings":"+YAAA,OAASA,IAAT,CAAeC,UAAf,KAAiC,kBAAjC,CACA,OAAoBC,QAApB,KAAoC,OAApC,C,6GAKA,OAASC,MAAT,KAAuB,sBAAvB,CAGA,MAAO,qBAAP,CACA,OAASC,QAAT,KAAyB,sBAAzB,CACA,OAASC,OAAT,KAAwB,kBAAxB,CACA;wFAEA,MAAO,SAASC,CAAAA,OAAT,EAAkB,cACJD,OAAO,EADH,CACbE,IADa,UACbA,IADa,CAErB,GAAMC,CAAAA,OAAO,CAAGP,UAAU,EAA1B,CAFqB,cAGSC,QAAQ,CAAC,EAAD,CAHjB,wCAGdO,OAHc,eAGLC,UAHK,uBAKNC,CAAAA,gBALM,4JAKrB,iBAAgCC,KAAhC,2IACIA,KAAK,CAACC,cAAN,GADJ,KAGOJ,OAAO,CAACK,IAAR,KAAmB,EAH1B,kEAOUC,OAPV,CAOoBX,QAAQ,CAACY,GAAT,CAAa,OAAb,CAPpB,uBAS+BD,CAAAA,OAAO,CAACE,IAAR,CAAa,CACpCC,KAAK,CAAET,OAD6B,CAEpCU,QAAQ,CAAEZ,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEa,EAFoB,CAGpCC,MAAM,CAAEd,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEe,IAHsB,CAAb,CAT/B,QASUC,YATV,eAeIf,OAAO,CAACS,IAAR,kBAAuBM,YAAY,CAACC,GAApC,GAfJ,sDALqB,mDAuBrB,mBACI,aAAK,EAAE,CAAC,WAAR,wBACI,sCACI,YAAK,GAAG,CAAEC,cAAV,CAA0B,GAAG,CAAC,qDAA9B,EADJ,cAEI,qDAFJ,cAGI,6EAHJ,GADJ,cAMI,mCACI,aAAK,SAAS,CAAC,cAAf,wBACI,YAAK,GAAG,CAAEC,OAAV,CAAmB,GAAG,CAAC,UAAvB,EADJ,cAEI,2CAFJ,cAGI,cAAM,QAAQ,CAAEf,gBAAhB,wBACI,cACI,IAAI,CAAC,MADT,CAEI,WAAW,CAAC,cAFhB,CAGI,QAAQ,CAAG,kBAAAC,KAAK,QAAIF,CAAAA,UAAU,CAACE,KAAK,CAACe,MAAN,CAAaC,KAAd,CAAd,EAHpB,CAII,KAAK,CAAEnB,OAJX,EADJ,cAOI,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,wBAPJ,GAHJ,cAcI,uEAAqC,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,yBAArC,GAdJ,GADJ,EANJ,GADJ,CA2BH","sourcesContent":["import { Link, useHistory } from 'react-router-dom';\r\nimport { FormEvent, useState } from 'react';\r\n\r\nimport ilustrationImg from '../assets/images/illustration.svg';\r\nimport logoImg from '../assets/images/logo.svg';\r\n\r\nimport { Button } from '../components/Button';\r\n\r\n\r\nimport '../styles/auth.scss';\r\nimport { database } from '../services/firebase';\r\nimport { useAuth } from '../hooks/useAuth';\r\n// import { useAuth } from '../hooks/userAuth';\r\n\r\nexport function NewRoom(){\r\n    const { user } = useAuth();\r\n    const history = useHistory();\r\n    const [newRoom, setNewRoom] = useState('');\r\n    \r\n    async function handleCreateRoom(event: FormEvent) {\r\n        event.preventDefault();\r\n        \r\n        if(newRoom.trim() === ''){\r\n            return;\r\n        }\r\n\r\n        const roomRef = database.ref('rooms');\r\n\r\n        const firebaseRoom = await roomRef.push({\r\n            title: newRoom,\r\n            authorId: user?.id,\r\n            author: user?.name,\r\n        })\r\n\r\n        history.push(`/rooms/${firebaseRoom.key}`);\r\n\r\n    }\r\n    return(\r\n        <div id=\"page-auth\">\r\n            <aside>\r\n                <img src={ilustrationImg} alt=\"Ilustração simbolizando perguntas e respostas\" />\r\n                <strong>Crie salas de Q&amp;A ao vivo</strong>\r\n                <p>Tire suas dúvidas da sua audiência em tempo real</p>\r\n            </aside>\r\n            <main>\r\n                <div className=\"main-content\">\r\n                    <img src={logoImg} alt=\"Letmeask\" />\r\n                    <h2>Criar uma nova sala</h2>\r\n                    <form onSubmit={handleCreateRoom} >\r\n                        <input \r\n                            type=\"text\" \r\n                            placeholder=\"nome da sala\"\r\n                            onChange= {event => setNewRoom(event.target.value)}\r\n                            value={newRoom}\r\n                        />\r\n                        <Button type=\"submit\">\r\n                            Criar sala\r\n                        </Button>\r\n                    </form>\r\n                    <p>Quer enrar em uma sala existente? <Link to=\"/\">clique aqui</Link></p>\r\n                </div>\r\n            </main>\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}